Methods Preparation of TiNS TiNS were synthesized by solid-state calcination of TiO 2 :K 2 CO 3 :LiCO 3 in a mole ratio of 1.0:0.23:0.078 according to previously reported procedures 45 . The mixed powder was finely ground for 30 min and calcined in two steps: heating at 900 °C for 1 h and gentle grinding after natural cooling to room temperature, and heating at 1,000 °C for 20 h and natural cooling to room temperature. In both calcination steps, the temperature rose at 10 °C min −1 to reach the set point. The obtained layered parent microcrystals were washed three times with hot water to remove unreacted K 2 CO 3 and LiCO 3 . The washed K 0.8 Ti 1.73 Li 0.27 O 4 layered oxide was protonated by soaking in HCl solution (0.5 M) at room temperature for 3 days, and the solution was replaced daily with a fresh batch. To produce TiNS, the protonated titanate crystals (H 1.0 Ti 1.73 O 4 ) were dispersed in an aqueous solution of tetramethylam- monium hydroxide (TMAOH) and then shaken gently for 2 days. The molar ratio between TMAOH and the protonated solid was 1:1, and the solid-to-solution ratio was controlled at 4.0 mg ml −1 . To avoid the deleterious impact of TMAOH molecules in electrocatalytic applica- tions, TiNS was purified by adding an appropriate amount of Mg(NO 3 ) 2 (0.5 M). Then, the suspension was separated by centrifugation for 30 min at 1,610g at room temperature. The supernatant containing TMA + NO 3 − was discarded, and TiNS was collected as a precipitate. The precipitate was re-suspended in HCl (1 M) and sonicated for 30 min, to convert residual Mg(OH) 2 into MgCl 2 and remove it with the super- natant after centrifugation (2,862g). Finally, TiNS was dispersed in EG by a simple shaking process.

Preparation of perovskite-based photocathode ITO/glass substrates were treated with UV/ozone for 30 min and then transferred to a N 2 -filled glovebox with both H 2 O and O 2 levels below 0.1 ppm. A PTAA solution (2 mg ml −1 in toluene) was spin-cast at 4,000 rpm for 30 s, followed by heating at 100 °C for 15 min. After cool- ing to room temperature, a PFN-Br solution (0.5 mg ml −1 in methanol) was deposited onto the PTAA films. The perovskite precursor solution was prepared by dissolving caesium iodide (CsI; 0.06 M), formami- dinium iodide (FAI; 1 M), methylammonium bromide (MABr; 0.2 M), lead iodide (PbI 2 ; 1.1 M), lead bromide (PbBr 2 ; 0.2 M) and oleylamine (0.1 wt.%) in 1 ml of dimethylformamide/dimethyl sulfoxide (DMSO) mixed solvent (4/1, v/v). The perovskite layer was deposited using a two-step spin-coating procedure at 1,000 rpm for 5 s and then 5,000 rpm for 30 s. During the second step, 150 µl of chlorobenzene as an antisolvent was quickly dropped on the centre 10 s before the end of the whole spinning process. The film was annealed at 100 °C for 30 min. The perovskite film was coated with PMMA (1 mg ml −1 in ethyl acetate) and spun at 5,000 rpm before being heated at 100 °C for 5 min. The electron transporting layer was deposited by spin-casting a PC 61 BM solution (25 mg ml −1 in chlorobenzene) at 1,000 rpm for 30 s and a BCP solution (1 mg ml −1 in isopropyl alcohol) at 4,000 rpm for 30 s. Finally, a 150-nm-thick Ag electrode was deposited via thermal evaporation at <10 −6 Torr. Ru@TiNS was sprayed on a piece of CP. After drying, the Ru@ TiNS loaded on CP was connected to the Ni foil (0.6 cm × 0.6 cm, thick- ness ~0.1 mm, Alfa Aesar) with the silver (Ag) paste. This configuration was then attached to the Ag layer (top electrode of the perovskite solar cell) using FM, where it was melted at its melting point (62 °C), followed by cooling to room temperature according to a previous report 28 . The edges were then covered with epoxy resin. Finally, to complete the fabrication, small, enamelled piece of copper wire was connected to the samples via Ag paste, leaving them for at least 24 h to dry completely.

Preparation of Ru@TiNS and Pt@TiNS TiNS loaded with Ru and Pt (denoted as Ru@TiNS and Pt@TiNS, respec- tively) were prepared by a modified polyol method. An appropriate amount of RuCl 3 or H 2 PtCl 6 precursor was added to isolated TiNS to reach 25 wt.% Ru or 20 wt.% Pt. Typically, TiNS (200 mg) was first dispersed in EG (50 ml) by shaking. Then, the Ru precursor solution (103.13 mg RuCl 3 ·xH 2 O dissolved in 10 ml deionized water, equivalent to 50.25 mg of Ru) was added dropwise to TiNS dispersed in EG. In the case of Pt@TiNS, the Pt precursor solution (107.92 mg H 2 PtCl 6 ·6H 2 O

Preparation of the catalyst ink and working electrode To study the electrocatalytic performance, a uniform ink dispersion was prepared by sonicating 2.0 mg of the electrocatalyst in 0.95 ml ethanol and 0.05 ml Nafion solution (5 wt.%) for 30 min, followed by stirring for 10 h. The obtained ink was sprayed onto the surface (1.5 cm 2 ) of a clean carbon paper (CP) on a hotplate at 120 °C. The catalyst load- ing was accurately measured by weighting the CP with a microbalance with and without the electrocatalyst. The catalyst inks were sprayed onto one side of CP at a weight density of 1 mg cm −2 . Considering that the electrocatalyst contained 25 wt.% of Ru or 20 wt.% of Pt, the Ru or Pt mass density was about 0.25 and 0.2 mg cm −2 , respectively.