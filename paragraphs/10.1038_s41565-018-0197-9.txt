Synthesis. Preparation of PVP-stabilized Pd-NPs. We dissolved 34 mg KI and 100 mg PVP (M w ~55,000) in 10 ml formamide and heated the solution at 120 °C (ref. 41). Then, 59 mg Na 2 PdCl 4 powder was added and the temperature was maintained for 10 min with vigorous stirring. After the mixture was cooled down to room temperature, 120 ml acetone was added and the dispersion was collected by centrifugation at 15,000 r.p.m. for 5 min. The obtained Pd nanoparticles were dispersed in 21 ml mixed solvent (volume ratio DMF:methanol is 4:1).

Preparation of Pd-NPs supported on ZIF-8 and pyrolysis treatment. First, pure ZIF-8 powder was synthesized. 1,069 mg Zn(NO 3 ) 2 ·6H 2 O was dissolved in 15 ml mixed solvent (DMF:methanol, 4:1.) under ultrasound for 5 min to form a clear solution in flask A. 1,161 mg 2-methylimidazole was dissolved in 10 ml mixed solvent (DMF:methanol, 4:1.) under ultrasound for 5 min to form a clear solution in flask B. Then, we added flask B into flask A at room temperature and kept the temperature constant for 12 h without stirring. The obtained pure ZIF-8 powder was collected by centrifugation at 15,000 r.p.m. for 5 min and washed with methanol three times and dried at 70 °C for 5 h. Then, we mixed the pure ZIF-8 powder with 0.5 ml as-prepared Pd nanoparticles dispersed in DMF:methanol solution (~1 mg Pd ml–1) and evaporated the solvent to obtain Pd-NPs supported on ZIF-8. We transferred the power of Pd-NPs supported on ZIF-8 into a ceramic boat and placed it in a tube furnace. The sample was heated to 900 °C with a heating rate of 5 °C min–1 and kept at 900 °C for 3 h under flowing nitrogen gas and then cooled to room temperature naturally.

Preparation of PVP-stabilized Pt-NPs. We dissolved 77.6 mg K 2 PtCl 6 and 88.8 mg PVP (M w ~55,000) in 20 ml water, stirred the solution for 10 min, then transferred the solution to a 50 ml Teflon-lined stainless steel autoclave and sealed the container in a stainless steel bomb42. We heated the system at 160 °C under autogenous pressure for 8 h in an oven. The container was cooled down to room temperature naturally after the reaction. 120 ml acetone was added and the dispersion was collected by centrifugation at 15,000 r.p.m. for 5 min. The obtained Pt nanoparticles were dispersed in 31 ml methanol.

Preparation of PVP-stabilized Au-NPs. PVP (K30, 1.2 mmol in monomer unit) was added into an aqueous solution of HAuCl 4 ·3H 2 O (1 mM, 30 ml) under ultrasound for 10 min (ref. 43). After stirring the mixture for 30 min at 0 °C by ice bath, we added an aqueous solution of NaBH 4 (0.1 M, 3 ml) to the mixture under vigorous stirring and kept the temperature constant for another 30 min. After the reaction, 120 ml acetone was added and the dispersion was collected by centrifugation at 15,000 r.p.m. for 5 min. The obtained Au nanoparticles were washed with water several times and centrifuged by ultrafiltration centrifuge tube with a molecular weight cut-off membrane (MWCO = 10 kDa) at 10,000 r.p.m. for 5 min. Finally, the Au nanoparticles were dispersed in 6 ml methanol.

Preparation of Pd-NPs@ZIF-8. 1,069 mg Zn(NO 3 ) 2 ·6H 2 O was dissolved in 15 ml mixed solvent (volume ratio DMF:methanol is 4:1) under ultrasound for 5 min to form a clear solution in flask A. Then 0.5 ml as-prepared Pd nanoparticles dispersed in DMF and methanol solution (~1 mg Pd ml–1) was added into flask A. 1,161 mg 2-methylimidazole was dissolved in 10 ml mixed solvent (DMF:methanol, 4:1.) under ultrasound for 5 min to form a clear solution in flask B. Then, we added the contents of flask B into flask A at room temperature and maintained the temperature for 12 h without stirring. The obtained product was collected by centrifugation at 15,000 r.p.m. for 5 min and washed with methanol three times and finally dried at 70 °C for 5 h.

Preparation of Pt-NPs@ZIF-8. 1,069 mg Zn(NO 3 ) 2 ·6H 2 O was dissolved in 15 ml methanol under ultrasound for 5 min to form a clear solution in flask A. Then 0.3 ml as-prepared Pt nanoparticles dispersed in methanol solution (~1 mg Pt ml–1) was added into flask A. 1,161 mg 2-methylimidazole was dissolved in 15 ml methanol under ultrasound for 5 min to form a clear solution in flask B. Then, we added flask B into flask A at room temperature and maintained the temperature for 12 h without stirring. The obtained product was collected by centrifugation at 15,000 r.p.m. for 5 min and washed with methanol three times and finally dried at 70 °C for 5 h.

Preparation of Au-NPs@ZIF-8. 1,069 mg Zn(NO 3 ) 2 ·6H 2 O was dissolved in 15 ml methanol under ultrasound for 5 min to form a clear solution in flask A. Then 0.3 ml as-prepared Au nanoparticles dispersed in methanol solution (~1 mg Au ml–1) was added into flask A. 1,161 mg 2-methylimidazole was dissolved in 15 ml methanol under ultrasound for 5 min to form a clear solution in flask B. Then, we added flask B into flask A at room temperature and maintained the temperature for 12 h without stirring. The obtained product was collected by centrifugation at 15,000 r.p.m. for 5 min and washed with methanol for three times and finally dried at 70 °C for 5 h.

Preparation of Pd-SAs. We transferred Pd-NPs@ZIF-8 powder into a ceramic boat and placed it in a tube furnace. The sample was heated to 900 °C with a heating rate of 5 °C min–1 and kept at 900 °C for 3 h under flowing nitrogen gas and then cooled to room temperature naturally. The obtained material was used without further treatment.

Preparation of Pt-SAs. We transferred Pt-NPs@ZIF-8 powder into a ceramic boat and placed it in a tube furnace. The sample was heated to 1,000 °C with a heating rate of 5 °C min–1 and kept at 1,000 °C for 5 h under flowing nitrogen gas and then

Preparation of Au-SAs. We transferred Au-NPs@ZIF-8 powder into a ceramic boat and placed it in a tube furnace. The sample was heated to 1,000 °C with a heating rate of 5 °C min–1 and kept at 1,000 °C for 5 h under flowing nitrogen gas and then cooled to room temperature naturally. The obtained material was used without further treatment.

Preparation of Pd/CN-200, Pd/CN-300, Pd/CN-400, Pd/CN-500, Pd/CN-600, Pd/ CN-700 and Pd/CN-800. We transferred Pd-NPs@ZIF-8 powder into a ceramic boat and placed it in a tube furnace. The sample was heated to 200 °C, 300 °C, 400 °C, 500 °C, 600 °C, 700 °C or 800 °C, with a heating rate of 5 °C min–1 and maintained at the temperature for 3 h under flowing nitrogen gas and then cooled to room temperature naturally. The obtained material was used without further treatment.

Preparation of Pd-NPs supported on activated carbon and pyrolysis treatment. 1.0 ml as-prepared Pd nanoparticles dispersed in DMF:methanol solution (~1 mg Pd ml–1) was mixed with 100 mg activated carbon and stirred for an hour. Then the mixture was dried to evaporate the solvent to obtain Pd-NPs supported on activated carbon (Pd-NPs/C). We transferred the Pd-NPs/C powder into a ceramic boat and placed it in a tube furnace. The sample was heated to 900 °C with a heating rate of 5 °C min–1 and kept at 900 °C for 3 h under flowing nitrogen gas and then cooled to room temperature naturally.

Preparation of PVP-free Pd-NPs supported on ZIF-8-derived N-doped carbon (Pd- NPs/CN). First, ZIF-8-derived N-doped carbon (CN) was obtained by pyrolysing ZIF-8 powder at 900 °C for 3 h under inert atmosphere. Then, the PVP-protected Pd-NPs methanol solution (~1 mg Pd ml–1, containing 1.6 mg Pd) was mixed with CN and stirred for 1 h. The mixture was vacuum dried to evaporate the solvent. The obtained Pd-NPs/CN was then heated in air at 400 °C for 2 h to remove PVP as guided by a reported procedure44. The PVP-free Pd-NPs/CN were reduced in 5% H 2 /Ar at 200 °C for 1 h before catalytic test.